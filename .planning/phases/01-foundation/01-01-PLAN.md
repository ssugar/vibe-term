---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - src/stores/types.ts
  - src/stores/appStore.ts
autonomous: true

must_haves:
  truths:
    - "npm install succeeds without peer dependency warnings"
    - "TypeScript compilation succeeds with strict mode"
    - "Zustand store can be imported and used in a React component"
  artifacts:
    - path: "package.json"
      provides: "Project configuration with dependencies"
      contains: "ink"
    - path: "tsconfig.json"
      provides: "TypeScript configuration with strict mode"
      contains: "strict"
    - path: "src/stores/types.ts"
      provides: "Type definitions for app state"
      exports: ["AppState", "Session"]
    - path: "src/stores/appStore.ts"
      provides: "Zustand store for global state"
      exports: ["useAppStore"]
  key_links:
    - from: "src/stores/appStore.ts"
      to: "src/stores/types.ts"
      via: "type import"
      pattern: "import.*AppState.*from.*types"
---

<objective>
Initialize the project with npm, TypeScript, Ink, React 19, and Zustand. Establish the foundational type system and state management that all subsequent phases will build upon.

Purpose: Create the skeleton that all UI components and features depend on.
Output: Working npm project with TypeScript compilation, Zustand store ready for use.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Project Scaffolding</name>
  <files>
    - package.json
    - tsconfig.json
    - src/ (directory structure)
  </files>
  <action>
Initialize npm project and install dependencies:

1. Run `npm init -y` to create package.json
2. Update package.json with:
   - "name": "cc-tui-hud"
   - "type": "module" (ESM required for Ink 6.x)
   - "main": "dist/cli.js"
   - "bin": { "cc-tui-hud": "dist/cli.js" }
   - "scripts": {
       "dev": "tsx src/cli.tsx",
       "build": "tsup src/cli.tsx --format esm --dts",
       "typecheck": "tsc --noEmit"
     }
   - "engines": { "node": ">=20" }

3. Install dependencies:
   - Core: `npm install ink@6 react@19 zustand@5 meow@14 figures@6`
   - Dev: `npm install -D typescript@5 @types/react tsx tsup`

4. Create tsconfig.json with strict mode:
   ```json
   {
     "compilerOptions": {
       "target": "ES2022",
       "module": "NodeNext",
       "moduleResolution": "NodeNext",
       "jsx": "react-jsx",
       "strict": true,
       "esModuleInterop": true,
       "skipLibCheck": true,
       "outDir": "dist",
       "rootDir": "src",
       "declaration": true,
       "resolveJsonModule": true
     },
     "include": ["src/**/*"],
     "exclude": ["node_modules", "dist"]
   }
   ```

5. Create directory structure:
   - src/
   - src/components/
   - src/stores/
   - src/hooks/
   - src/utils/
  </action>
  <verify>
    - `npm ls ink react zustand meow figures` shows correct versions (ink@6.x, react@19.x, zustand@5.x)
    - `npm ls --dev typescript tsx tsup` shows dev dependencies
    - `cat package.json | grep '"type": "module"'` confirms ESM
    - Directory structure exists: `ls -la src/`
  </verify>
  <done>
    package.json has all dependencies, type=module, proper scripts.
    tsconfig.json has strict mode enabled.
    src/ directory structure created.
  </done>
</task>

<task type="auto">
  <name>Task 2: Type Definitions and Zustand Store</name>
  <files>
    - src/stores/types.ts
    - src/stores/appStore.ts
  </files>
  <action>
Create the core type definitions and Zustand store:

1. Create src/stores/types.ts with:
   ```typescript
   // Session represents a Claude Code instance (used in later phases)
   export interface Session {
     id: string;
     projectPath: string;
     status: 'working' | 'idle' | 'blocked';
     contextUsage: number; // 0-100 percentage
     model: 'sonnet' | 'opus' | 'haiku';
     startedAt: Date;
     lastActivity: Date;
   }

   // Application state
   export interface AppState {
     // UI state
     isConfirmingExit: boolean;
     showHelp: boolean;
     selectedIndex: number;
     error: string | null;

     // Refresh state
     lastRefresh: Date | null;
     refreshInterval: number; // milliseconds

     // Sessions (empty in Phase 1, populated in Phase 2)
     sessions: Session[];

     // Actions
     setConfirmingExit: (value: boolean) => void;
     setShowHelp: (value: boolean) => void;
     setSelectedIndex: (index: number) => void;
     setError: (error: string | null) => void;
     setLastRefresh: (date: Date) => void;
     setRefreshInterval: (interval: number) => void;
     setSessions: (sessions: Session[]) => void;
   }
   ```

2. Create src/stores/appStore.ts with:
   ```typescript
   import { create } from 'zustand';
   import type { AppState } from './types.js';

   export const useAppStore = create<AppState>()((set) => ({
     // Initial UI state
     isConfirmingExit: false,
     showHelp: false,
     selectedIndex: 0,
     error: null,

     // Initial refresh state
     lastRefresh: null,
     refreshInterval: 2000, // 2 seconds default

     // Sessions (empty initially)
     sessions: [],

     // Actions
     setConfirmingExit: (value) => set({ isConfirmingExit: value }),
     setShowHelp: (value) => set({ showHelp: value }),
     setSelectedIndex: (index) => set({ selectedIndex: index }),
     setError: (error) => set({ error }),
     setLastRefresh: (date) => set({ lastRefresh: date }),
     setRefreshInterval: (interval) => set({ refreshInterval: interval }),
     setSessions: (sessions) => set({ sessions }),
   }));
   ```

Note: Use `.js` extension in imports for ESM compatibility (TypeScript resolves .js to .ts).
  </action>
  <verify>
    - `npx tsc --noEmit` passes without errors
    - Both files exist: `ls src/stores/`
    - types.ts exports Session and AppState interfaces
    - appStore.ts exports useAppStore hook
  </verify>
  <done>
    Type definitions created with Session and AppState interfaces.
    Zustand store created with all required state and actions.
    TypeScript compilation succeeds.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. Run `npm run typecheck` - should pass with no errors
2. Verify dependency versions:
   ```bash
   npm ls ink react zustand
   ```
   Should show ink@6.x, react@19.x, zustand@5.x

3. Verify strict mode is active:
   ```bash
   grep -q '"strict": true' tsconfig.json && echo "Strict mode enabled"
   ```
</verification>

<success_criteria>
- npm install completes without peer dependency warnings
- TypeScript strict mode compilation passes
- src/stores/types.ts exports Session and AppState types
- src/stores/appStore.ts exports useAppStore hook
- All directories exist: src/components, src/stores, src/hooks, src/utils
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
