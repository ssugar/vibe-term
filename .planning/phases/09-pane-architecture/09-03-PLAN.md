---
phase: 09-pane-architecture
plan: 03
type: execute
wave: 3
depends_on: ["09-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can press Enter on a session and see it appear in main pane"
    - "User can press Ctrl+h from main pane to return to HUD"
    - "Active session shows underline marker in tab strip"
    - "Session switching is reliable with no focus confusion"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete pane architecture works end-to-end with human testing.

Purpose: Confirm session switching, return-to-HUD, and visual markers work correctly in real usage.
Output: Verified working feature or identified issues requiring fixes
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/09-pane-architecture/09-CONTEXT.md
@.planning/phases/09-pane-architecture/09-01-SUMMARY.md
@.planning/phases/09-pane-architecture/09-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Pane architecture with session switching, return-to-HUD keybinding, and active session marker.

Features implemented:
1. Enter key switches selected session into main pane
2. Ctrl+h returns focus to HUD from anywhere
3. Active session shows underline marker (distinct from selection highlight)
4. Session state tracked via tmux environment variables
  </what-built>
  <how-to-verify>
**Setup:**
1. Start claude-terminal: `npm start`
2. Have at least 2 Claude sessions running (in separate terminals/tmux panes)

**Test 1: Session Switching**
1. In HUD, use arrow keys or j/k to select a session
2. Press Enter
3. Verify:
   - Main pane shows the selected session
   - Focus moves to main pane (you can type)
   - That session's tab now shows underline marker
   - Previously active session loses underline (if any)

**Test 2: Return to HUD**
1. While focused in main pane (Claude session)
2. Press Ctrl+h
3. Verify:
   - Focus returns to HUD pane
   - Tab strip is visible and responsive
   - Can navigate with arrow keys

**Test 3: Selection vs Active**
1. Return to HUD (Ctrl+h)
2. Use arrow keys to move selection to a DIFFERENT session
3. Verify:
   - Selection highlight (inverse) moves with arrow keys
   - Active marker (underline) stays on the session that's in main pane
   - These are visually distinct

**Test 4: Multiple Switches**
1. Select session A, press Enter
2. Ctrl+h back to HUD
3. Select session B, press Enter
4. Verify:
   - Session B is now in main pane
   - Session B has underline, Session A does not
   - No "lost" panes or errors

**Test 5: Ctrl+h Backspace Conflict (WSL2/Terminal check)**
1. Focus on main pane (Claude session)
2. Type some text
3. Try pressing Backspace
4. Verify:
   - Backspace works normally (not intercepted by Ctrl+h)
   - If backspace triggers HUD return, note this as an issue

**Edge Cases:**
- Try switching to same session already active (should be no-op or handled gracefully)
- Try Ctrl+h when already on HUD (should be harmless)
  </how-to-verify>
  <resume-signal>
Report results:
- "approved" if all tests pass
- Describe any issues found (with steps to reproduce)
  </resume-signal>
</task>

</tasks>

<verification>
Human verification checkpoint. No automated verification.
</verification>

<success_criteria>
All 5 test scenarios pass without errors. Session switching is reliable, return-to-HUD works, and active marker is visually distinct.
</success_criteria>

<output>
After completion, create `.planning/phases/09-pane-architecture/09-03-SUMMARY.md`
</output>
